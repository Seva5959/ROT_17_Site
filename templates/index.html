{% extends "base.html" %}

{% block title %}Разгадай код{% endblock %}

{% block content %}
<div class="container">
    <h1>Проверь разгаданный шифр! </h1>
    
    <div class="grid">
        {% for code in codes %}
            <div class="card {{ 'solved' if code.solved }}">
                <span class="card-number">{{ code.roman_number }}</span>
                
                {% if code.solved %}
                    <div class="success-message">✅ Успешно разгадано!</div>
                    <button class="toggle-btn">▼ Показать ответ</button>
                    <div class="answer-block">
                        <input type="text" 
                               value="{{ answers[code.number] }}" 
                               id="answer-{{ code.id }}"
                               readonly>
                        <button class="copy-btn">Копировать</button>
                    </div>
                {% else %}
                    <form method="POST" action="{{ url_for('check', code_id=code.id) }}">
                        <input type="text" 
                               name="decoded_text" 
                               placeholder="Введите текст"
                               required>
                        <button type="submit">Проверить</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}